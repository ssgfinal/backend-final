<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ssg.com.houssg.dao.RoomDao">
	<insert id="addRoom" parameterType="ssg.com.houssg.dto.RoomDto">
    	INSERT INTO rooms (room_category, room_details, room_price, room_availability, accom_number)
    	VALUES (#{roomCategory}, #{roomDetails}, #{roomPrice}, #{roomAvailability}, #{accomNumber})
    	<selectKey keyProperty="roomNumber" resultType="int" order="AFTER">
    		SELECT LAST_INSERT_ID()
    	</selectKey>
	</insert>
	
	<select id="choiceAccom" parameterType="java.lang.Integer" resultType="ssg.com.houssg.dto.RoomDto">
		SELECT *
		FROM rooms
		WHERE accom_number=#{accomNumber}
	</select>
	
	<update id="updateRoom" parameterType="ssg.com.houssg.dto.RoomDto">
	    UPDATE rooms
	    SET room_category = #{roomCategory}, room_details = #{roomDetails}, room_price = #{roomPrice}, room_availability = #{roomAvailability}
	    WHERE room_number = #{roomNumber} and accom_number = #{accomNumber}
	</update>

</mapper>