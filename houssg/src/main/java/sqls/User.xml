<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="ssg.com.houssg.dao.UserDao">

	<!-- 아이디 중복확인 -->
	<select id="idCheck" parameterType="java.lang.String"
		resultType="java.lang.Integer">
		select count(*)
		from User
		where id=#{id}
	</select>
	
	<!-- 닉네임 중복확인 -->
	<select id="nicknameCheck" parameterType="java.lang.String"
		resultType="java.lang.Integer">
		select count(*)
		from User
		where nickname=#{nickname}
	</select>
	
	<!-- 휴대폰번호 중복확인 -->
	<select id="phoneNumberCheck" parameterType="java.lang.String"
		resultType="java.lang.Integer">
		select count(*)
		from User
		where phone_number=#{phone_number}
	</select>

	<insert id="signUp" parameterType="ssg.com.houssg.dto.UserDto">
		insert into User(auth, nickname, phone_number, password, id)
		values(0, #{nickname}, #{phone_number},   #{password},  #{id})
	</insert>

	<select id="login" parameterType="ssg.com.houssg.dto.UserDto"
		resultType="ssg.com.houssg.dto.UserDto">
		select  auth, nickname, phone_number, password, id
		from User
		where id=#{id} and password=#{password}
	</select>

	
<!-- 아이디 찾기  -->	
	<select id="findIdByPhoneNumber" parameterType="string" resultType="ssg.com.houssg.dto.UserDto">
        SELECT * FROM User WHERE phone_number = #{phone_number}
    </select>
    
    
    <!-- 비밀번호 업데이트 -->
	<update id="updatePassword" parameterType="ssg.com.houssg.dto.UserDto">
		UPDATE User
		SET password = #{password}
		WHERE id = #{id}
	</update>
	
	<!-- 아이디 이메일로 사용자 찾기 / 비번 찾기용 -->
	<select id="findUserByNicknameUserId" parameterType="java.util.Map" resultType="ssg.com.houssg.dto.UserDto">
		    SELECT *
		    FROM User
		    WHERE id = #{id} AND nickname = #{nickname}
	</select>
    
   
	

</mapper>